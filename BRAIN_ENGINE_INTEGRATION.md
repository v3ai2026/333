# ğŸ§  MagicAI å¤§è„‘å¼•æ“é›†æˆæŒ‡å—

## ä¸€ã€å¤§è„‘å¼•æ“æ ¸å¿ƒæ¦‚å¿µ

æ™ºèƒ½å¤§è„‘å¼•æ“æ˜¯ MagicAI ç³»ç»Ÿçš„ä¸­æ¢å†³ç­–ç³»ç»Ÿï¼Œè´Ÿè´£ï¼š

1. **æ™ºèƒ½å†³ç­–** - æ ¹æ®è¯·æ±‚ç±»å‹é€‰æ‹©æœ€ä½³å¤„ç†æ¨¡å—
2. **ä»»åŠ¡è°ƒåº¦** - ç®¡ç†å¼‚æ­¥ä»»åŠ¡ä¼˜å…ˆçº§å’Œæ‰§è¡Œé¡ºåº
3. **çŸ¥è¯†ç§¯ç´¯** - æ”¶é›†ç³»ç»Ÿè¿è¡Œæ¨¡å¼ï¼ŒæŒç»­æ”¹è¿›
4. **è‡ªé€‚åº”ä¼˜åŒ–** - æ ¹æ®ç³»ç»Ÿè´Ÿè½½åŠ¨æ€è°ƒæ•´é…ç½®
5. **è¿ç»­å­¦ä¹ ** - æ„å»ºç³»ç»Ÿè®°å¿†ï¼Œæå‡å“åº”è´¨é‡

---

## äºŒã€æ¶æ„è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        ç”¨æˆ·è¯·æ±‚ / å¤–éƒ¨äº‹ä»¶                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ è¯·æ±‚è§£æ & åˆ†ç±»  â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Brain Engine æ ¸å¿ƒå¤„ç†       â”‚
    â”‚                              â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
    â”‚  â”‚ KnowledgeBase        â”‚   â”‚
    â”‚  â”‚ (è§„åˆ™åº“ + æ¨¡å¼)       â”‚   â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
    â”‚             â”‚                â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
    â”‚  â”‚ DecisionEngine       â”‚   â”‚
    â”‚  â”‚ (æ™ºèƒ½å†³ç­–)           â”‚   â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
    â”‚             â”‚                â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
    â”‚  â”‚ TaskScheduler        â”‚   â”‚
    â”‚  â”‚ (ä»»åŠ¡è°ƒåº¦)           â”‚   â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
    â”‚             â”‚                â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
    â”‚  â”‚ AdaptiveOptimizer    â”‚   â”‚
    â”‚  â”‚ (æ€§èƒ½ä¼˜åŒ–)           â”‚   â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
    â”‚             â”‚                â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
    â”‚  â”‚ SystemMetrics        â”‚   â”‚
    â”‚  â”‚ (æŒ‡æ ‡æ”¶é›†)           â”‚   â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
    â”‚                              â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚      è·¯ç”±åˆ°åŠŸèƒ½æ¨¡å—               â”‚
    â”‚                                   â”‚
    â”‚  Spider | RAG | ES | Neo4j |    â”‚
    â”‚  Celery | DuckDB | Monitor     â”‚
    â”‚                                   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  æ‰§è¡Œå¹¶åé¦ˆ     â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ å­¦ä¹  & ä¼˜åŒ–        â”‚
        â”‚ (æ›´æ–°çŸ¥è¯†åº“)       â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ä¸‰ã€æ ¸å¿ƒç±»è¯´æ˜

### 1. KnowledgeBase çŸ¥è¯†åº“

```python
class KnowledgeBase:
    """
    ç³»ç»Ÿè®°å¿†å’Œå†³ç­–è§„åˆ™åº“
    """
    
    åŠŸèƒ½:
    - å­˜å‚¨æˆåŠŸçš„å†³ç­–æ¨¡å¼
    - è®°å½•å¤±è´¥æ¡ˆä¾‹
    - å­¦ä¹ ç”¨æˆ·åå¥½
    - è·Ÿè¸ªæ€§èƒ½æŒ‡æ ‡
    
    å…³é”®æ–¹æ³•:
    - add_rule(context, decision, result) â†’ æ·»åŠ è§„åˆ™
    - get_rules(context) â†’ è·å–é€‚ç”¨è§„åˆ™
    - update_patterns() â†’ åˆ†ææ¨¡å¼
    - learn_from_success() â†’ æˆåŠŸå­¦ä¹ 
    - learn_from_failure() â†’ å¤±è´¥å­¦ä¹ 
```

**ç¤ºä¾‹ - å­¦ä¹ çˆ¬è™«ä¼˜åŒ–æ¨¡å¼**:

```python
# è§„åˆ™åº“å­¦åˆ°çš„æ¨¡å¼
{
    "context": {
        "domain": "news.site.com",
        "content_type": "news_articles"
    },
    "best_decision": {
        "module": "spider",
        "strategy": "dynamic_render",
        "concurrency": 5,
        "proxy_rotation": True
    },
    "success_rate": 0.94,
    "avg_response_time": 2.3,
    "last_used": "2026-01-09 10:45:23"
}
```

---

### 2. DecisionEngine å†³ç­–å¼•æ“

```python
class DecisionEngine:
    """
    æ ¹æ®ä¸Šä¸‹æ–‡æ™ºèƒ½é€‰æ‹©æ¨¡å—å’Œç­–ç•¥
    """
    
    å†³ç­–ç»´åº¦:
    - è¯·æ±‚ç±»å‹è¯†åˆ«
    - æ¨¡å—é€‰æ‹©
    - å‚æ•°ä¼˜åŒ–
    - ç½®ä¿¡åº¦è®¡ç®—
    - ç»“æœåé¦ˆ
    
    å·¥ä½œæµ:
    1. åˆ†æè¯·æ±‚ (è¯·æ±‚ç±»å‹, æ•°æ®é‡, æ—¶é—´é™åˆ¶)
    2. æŸ¥è¯¢çŸ¥è¯†åº“ (è·å–å†å²æœ€ä¼˜æ–¹æ¡ˆ)
    3. è¯„ä¼°å½“å‰ç³»ç»ŸçŠ¶æ€
    4. ç”Ÿæˆå†³ç­– (é€‰æ‹©æ¨¡å— + å‚æ•° + ä¼˜å…ˆçº§)
    5. è®°å½•å†³ç­–ç»“æœ (ç”¨äºåç»­å­¦ä¹ )
```

**å†³ç­–ç¤ºä¾‹**:

```python
# è¾“å…¥
request = {
    "action": "search",
    "query": "python machine learning",
    "result_count": 100,
    "filters": {"language": "en", "date": "2026"}
}

# DecisionEngine å†³ç­–è¿‡ç¨‹
decision = {
    "module": "elasticsearch",        # é€‰æ‹©æœç´¢å¼•æ“
    "action": "advanced_search",      # å…·ä½“æ“ä½œ
    "parameters": {
        "query": "python machine learning",
        "filters": {...},
        "page_size": 20,
        "timeout": 5000
    },
    "confidence": 0.92,              # å†³ç­–ç½®ä¿¡åº¦
    "reasoning": "Based on 47 similar successful queries"
}

# æ‰§è¡Œååé¦ˆ
feedback = {
    "success": True,
    "results_count": 98,
    "response_time": 450,
    "user_satisfied": True
}

# çŸ¥è¯†åº“å­¦ä¹ è¯¥æˆåŠŸæ¡ˆä¾‹
knowledge_base.learn_from_success(request, decision, feedback)
```

---

### 3. TaskScheduler ä»»åŠ¡è°ƒåº¦å™¨

```python
class TaskScheduler:
    """
    ç®¡ç†å¼‚æ­¥ä»»åŠ¡çš„ä¼˜å…ˆçº§å’Œæ‰§è¡Œé¡ºåº
    """
    
    ç‰¹æ€§:
    - ä¼˜å…ˆçº§é˜Ÿåˆ— (HIGH > NORMAL > LOW)
    - ä»»åŠ¡çŠ¶æ€è·Ÿè¸ª (pending â†’ running â†’ completed)
    - æ­»ä¿¡é˜Ÿåˆ— (å¤±è´¥ä»»åŠ¡é‡è¯•æˆ–æ”¾å¼ƒ)
    - æ€§èƒ½ç›‘æ§ (æ‰§è¡Œæ—¶é—´, æˆåŠŸç‡)
    
    é€‚ç”¨åœºæ™¯:
    - å†…å®¹æ‰¹é‡ç”Ÿæˆ
    - çˆ¬è™«å¤šURLæŠ“å–
    - æ•°æ®åˆ†ææŠ¥å‘Šç”Ÿæˆ
    - ç¤¾äº¤åª’ä½“æ‰¹é‡å‘å¸ƒ
```

**é˜Ÿåˆ—ç®¡ç†ç¤ºä¾‹**:

```python
# å…¥é˜Ÿä»»åŠ¡
scheduler.enqueue_task(
    task_id="gen_content_001",
    action="generate_content",
    priority="HIGH",
    params={
        "type": "blog_post",
        "topic": "AI trends 2026",
        "length": 3000
    }
)

scheduler.enqueue_task(
    task_id="crawl_news_001",
    action="crawl_news",
    priority="NORMAL",
    params={
        "source": "techcrunch",
        "pages": 50
    }
)

# æ‰§è¡Œé¡ºåº
# 1. gen_content_001 (HIGH) - ç«‹å³æ‰§è¡Œ
# 2. crawl_news_001 (NORMAL) - æ’é˜Ÿç­‰å¾…

# è·å–ä¸‹ä¸€ä¸ªä»»åŠ¡
next_task = scheduler.get_next_task()  # gen_content_001

# å®Œæˆåæ ‡è®°
scheduler.mark_task_complete(task_id="gen_content_001")
```

---

### 4. AdaptiveOptimizer è‡ªé€‚åº”ä¼˜åŒ–å™¨

```python
class AdaptiveOptimizer:
    """
    æ ¹æ®ç³»ç»Ÿå®æ—¶æŒ‡æ ‡åŠ¨æ€è°ƒæ•´é…ç½®
    """
    
    ä¼˜åŒ–ç»´åº¦:
    - CPU ä½¿ç”¨ç‡ä¼˜åŒ–
    - å†…å­˜ç®¡ç†ä¼˜åŒ–
    - Worker å¹¶å‘åº¦è°ƒæ•´
    - ç¼“å­˜ç­–ç•¥ä¼˜åŒ–
    - å“åº”æ—¶é—´ä¼˜åŒ–
    
    è‡ªåŠ¨è°ƒæ•´:
    - å½“ CPU > 80% â†’ å‡å°‘å¹¶å‘æ•°
    - å½“å†…å­˜ < 10% â†’ è§¦å‘ GC
    - å½“ P95 å»¶è¿Ÿ > 2s â†’ å¯ç”¨ç¼“å­˜
    - å½“ç©ºé—² Worker > 20% â†’ å‡å°‘ Worker æ•°
```

**ä¼˜åŒ–ä¾‹å­**:

```python
# ç³»ç»ŸæŒ‡æ ‡
metrics = {
    "cpu_usage": 85,
    "memory_usage": 78,
    "p95_latency": 2500,
    "active_tasks": 120,
    "queue_size": 300
}

# ä¼˜åŒ–å»ºè®®
suggestions = optimizer.optimize(metrics)
# {
#     "reduce_concurrency": True,      # CPUé«˜
#     "enable_aggressive_cache": True, # å»¶è¿Ÿé«˜
#     "trigger_gc": True,              # å†…å­˜é«˜
#     "recommended_settings": {
#         "celery_workers": 4,         # åŸæ¥ 6
#         "cache_ttl": 600,            # åŸæ¥ 300
#         "connection_pool_size": 50   # åŸæ¥ 100
#     }
# }

# åº”ç”¨ä¼˜åŒ–
optimizer.apply_optimizations(suggestions)
```

---

### 5. IntelligenceBrain ä¸»ç±»

```python
class IntelligenceBrain:
    """
    æ•´åˆæ‰€æœ‰å­ç³»ç»Ÿçš„æ™ºèƒ½ä¸­æ¢
    """
    
    æ ¸å¿ƒæ–¹æ³•:
    - process_request() â†’ å¤„ç†ç”¨æˆ·è¯·æ±‚
    - optimize_system() â†’ ç³»ç»Ÿä¼˜åŒ–å¾ªç¯
    - register_module() â†’ æ³¨å†ŒåŠŸèƒ½æ¨¡å—
    - get_system_status() â†’ è·å–ç³»ç»ŸçŠ¶æ€
    - continuous_learning() â†’ æŒç»­å­¦ä¹ å¾ªç¯
    
    å·¥ä½œæµ:
    1. æ¥æ”¶ç”¨æˆ·è¯·æ±‚
    2. æ„å»ºä¸Šä¸‹æ–‡ (ç”¨æˆ·ä¿¡æ¯, ç³»ç»ŸçŠ¶æ€, å†å²æ•°æ®)
    3. å†³ç­–å¼•æ“é€‰æ‹©æœ€ä¼˜è·¯å¾„
    4. ä»»åŠ¡è°ƒåº¦å™¨å®‰æ’æ‰§è¡Œ
    5. è·¯ç”±åˆ°å¯¹åº”æ¨¡å—
    6. æ”¶é›†æ‰§è¡Œç»“æœ
    7. æ›´æ–°çŸ¥è¯†åº“ (æˆåŠŸ/å¤±è´¥å­¦ä¹ )
    8. åé¦ˆç»™ç”¨æˆ·
```

---

## å››ã€é›†æˆå®ä¾‹

### é›†æˆ #1: ä¸ FastAPI ç½‘å…³é›†æˆ

```python
# fastapi_gateway.py
from brain_engine import IntelligenceBrain

brain = IntelligenceBrain()

@app.post("/api/process")
async def process_request(request: Request):
    """
    æ ¸å¿ƒå¤„ç†ç«¯ç‚¹ - æ‰€æœ‰è¯·æ±‚éƒ½ç»è¿‡å¤§è„‘
    """
    # ç”¨æˆ·è¯·æ±‚
    user_request = {
        "action": request.action,
        "params": request.params,
        "user_id": request.user_id,
        "timestamp": datetime.now()
    }
    
    # å¤§è„‘å¤„ç†
    result = await brain.process_request(user_request)
    
    return {
        "status": "success",
        "data": result["data"],
        "decision_reasoning": result["reasoning"],
        "processing_time": result["time_taken"]
    }
```

---

### é›†æˆ #2: ä¸ Celery ä»»åŠ¡é˜Ÿåˆ—é›†æˆ

```python
# celery_task_queue.py
from brain_engine import IntelligenceBrain

brain = IntelligenceBrain()

@celery_app.task
async def process_async_task(task_id, action, params):
    """
    å¼‚æ­¥ä»»åŠ¡é€šè¿‡å¤§è„‘å†³ç­–
    """
    # æ„å»ºä»»åŠ¡è¯·æ±‚
    task_request = {
        "task_id": task_id,
        "action": action,
        "params": params,
        "async": True
    }
    
    # å¤§è„‘å†³ç­–
    decision = brain.decision_engine.decide(task_request)
    
    # è°ƒåº¦ä»»åŠ¡
    brain.task_scheduler.enqueue_task(
        task_id=task_id,
        action=decision["module"],
        priority=decision["priority"]
    )
    
    # æ‰§è¡Œä»»åŠ¡
    result = await execute_task(decision)
    
    # åé¦ˆå­¦ä¹ 
    brain.knowledge_base.learn_from_success(
        task_request, decision, result
    )
```

---

### é›†æˆ #3: å†…å®¹ç”Ÿæˆå·¥ä½œæµ

```python
# ç”¨æˆ·è¯·æ±‚
request = {
    "action": "generate_content",
    "type": "blog_post",
    "topic": "Future of AI",
    "length": 2500
}

# å¤§è„‘å†³ç­–è¿‡ç¨‹
decision = brain.decision_engine.decide(request)
# decision.module = "content_generator"
# decision.model = "gpt-4"
# decision.priority = "HIGH"

# ä»»åŠ¡è°ƒåº¦
brain.task_scheduler.enqueue_task(
    task_id="content_gen_001",
    action="generate_blog_post",
    priority="HIGH",
    params=request
)

# å¼‚æ­¥æ‰§è¡Œ
executor.execute(decision)

# ç»“æœåé¦ˆ
result = {
    "content": "...",
    "quality_score": 0.92,
    "generation_time": 3.5
}

# å­¦ä¹ åé¦ˆ
brain.knowledge_base.learn_from_success(request, decision, result)
```

---

### é›†æˆ #4: è‡ªé€‚åº”æ€§èƒ½ä¼˜åŒ–

```python
# åå°æŒç»­è¿è¡Œ
while True:
    # æ”¶é›†ç³»ç»ŸæŒ‡æ ‡
    metrics = brain.system_metrics.collect()
    
    # åˆ†æä¼˜åŒ–æœºä¼š
    optimizations = brain.optimizer.optimize(metrics)
    
    # åº”ç”¨ä¼˜åŒ–
    brain.optimizer.apply_optimizations(optimizations)
    
    # æ›´æ–°é…ç½®
    update_system_config(optimizations)
    
    # ç­‰å¾…ä¸‹ä¸€ä¸ªå‘¨æœŸ
    await asyncio.sleep(60)  # æ¯åˆ†é’Ÿæ£€æŸ¥ä¸€æ¬¡
```

---

## äº”ã€çŸ¥è¯†åº“å­¦ä¹ æœºåˆ¶

### å­¦ä¹ è§„åˆ™ç»“æ„

```python
learning_rule = {
    "id": "rule_001",
    "context": {
        "action_type": "content_generation",
        "content_type": "blog_post",
        "language": "english",
        "length_range": [1000, 5000]
    },
    "decision": {
        "module": "gpt-4",
        "temperature": 0.7,
        "max_tokens": 3000
    },
    "outcomes": {
        "success_count": 156,
        "failure_count": 4,
        "success_rate": 0.975,
        "avg_quality": 0.88,
        "avg_time": 2.3
    },
    "last_updated": "2026-01-09T10:30:00Z",
    "confidence": 0.95,
    "usage_frequency": "DAILY"
}
```

### å­¦ä¹ æµç¨‹

```
æˆåŠŸæ‰§è¡Œ
    â†“
æå–ç‰¹å¾ (ä¸Šä¸‹æ–‡ + å†³ç­– + ç»“æœ)
    â†“
æŸ¥è¯¢çŸ¥è¯†åº“ (æ˜¯å¦å­˜åœ¨ç›¸ä¼¼è§„åˆ™)
    â†“
    â”œâ”€ å­˜åœ¨ â†’ æ›´æ–°è§„åˆ™æƒé‡å’Œç»Ÿè®¡
    â””â”€ ä¸å­˜åœ¨ â†’ åˆ›å»ºæ–°è§„åˆ™
    â†“
å¢åŠ ç½®ä¿¡åº¦
    â†“
æ›´æ–°æœ€åä½¿ç”¨æ—¶é—´
    â†“
é‡æ–°æ’åºè§„åˆ™ä¼˜å…ˆçº§
```

---

## å…­ã€ç›‘æ§ä¸è°ƒè¯•

### ç³»ç»Ÿå¥åº·æ£€æŸ¥

```python
# è·å–ç³»ç»ŸçŠ¶æ€
status = brain.get_system_status()

{
    "overall_health": "HEALTHY",
    "uptime": "7d 14h 32m",
    "requests_processed": 45230,
    "success_rate": 0.987,
    "avg_response_time": 485,
    "active_workers": 4,
    "queue_length": 23,
    "knowledge_rules": 1247,
    "last_learning": "2026-01-09T10:25:00Z",
    "modules": {
        "elasticsearch": {"status": "healthy", "latency": 45},
        "chromadb": {"status": "healthy", "latency": 120},
        "neo4j": {"status": "healthy", "latency": 78},
        "celery": {"status": "healthy", "workers": 4}
    }
}
```

### è°ƒè¯•å†³ç­–è¿‡ç¨‹

```python
# å¯ç”¨è°ƒè¯•æ¨¡å¼
decision = brain.decision_engine.decide(
    request,
    debug=True
)

# è¾“å‡ºå®Œæ•´å†³ç­–é“¾
{
    "decision": "elasticsearch_search",
    "confidence": 0.92,
    "reasoning": [
        "Request matched 47 similar successful queries",
        "Query complexity score: 0.65 (within optimal range)",
        "Current system load: medium (using fast path)",
        "User profile: experienced searcher (using advanced query)"
    ],
    "alternative_options": [
        {
            "option": "chromadb_semantic_search",
            "confidence": 0.78,
            "reasoning": "Could provide better semantic results"
        }
    ],
    "execution_time": 3.2
}
```

---

## ä¸ƒã€æœ€ä½³å®è·µ

### âœ… æ¨èåšæ³•

1. **å®šæœŸç›‘æ§çŸ¥è¯†åº“å¤§å°**
   - å®šæœŸæ¸…ç†è¿‡æ—¶è§„åˆ™
   - åˆå¹¶ç›¸ä¼¼è§„åˆ™
   - ä¿æŒçŸ¥è¯†åº“ä¼˜åŒ–

2. **å¯ç”¨å®Œæ•´æ—¥å¿—**

   ```python
   brain.enable_logging(
       level="DEBUG",
       output="file",
       rotation="daily"
   )
   ```

3. **å®šæœŸåˆ†æå­¦ä¹ æ¨¡å¼**

   ```python
   patterns = brain.knowledge_base.analyze_patterns()
   # è¯†åˆ«å¸¸è§è¯·æ±‚æ¨¡å¼, ä¼˜åŒ–è§„åˆ™
   ```

4. **A/B æµ‹è¯•æ–°è§„åˆ™**

   ```python
   # åœ¨ 10% æµé‡ä¸Šæµ‹è¯•æ–°è§„åˆ™
   brain.add_rule(new_rule, test_percentage=10)
   ```

### âŒ é¿å…åšæ³•

1. âŒ ç¦ç”¨å­¦ä¹ æœºåˆ¶
2. âŒ æ‰‹åŠ¨ç¡¬ç¼–ç å†³ç­–è§„åˆ™
3. âŒ å¿½ç•¥ç³»ç»ŸæŒ‡æ ‡
4. âŒ è¿‡åº¦ä¼˜åŒ–å¯¼è‡´è®¡ç®—å¼€é”€

---

## å…«ã€æ€§èƒ½åŸºå‡†

| æ“ä½œ | å»¶è¿Ÿ | ååé‡ |
|------|------|--------|
| è¯·æ±‚å†³ç­– | <10ms | 1K req/s |
| çŸ¥è¯†åº“æŸ¥è¯¢ | <5ms | 2K query/s |
| ä»»åŠ¡è°ƒåº¦ | <3ms | 5K task/s |
| ç³»ç»Ÿä¼˜åŒ– | <100ms | 1 opt/s |
| å­¦ä¹ è§„åˆ™æ›´æ–° | <50ms | 20 rule/s |

---

## ä¹ã€æ•…éšœæ’é™¤

### é—®é¢˜: å†³ç­–ç½®ä¿¡åº¦ä½

**åŸå› **: çŸ¥è¯†åº“è§„åˆ™ä¸è¶³
**è§£å†³**:

```python
# åˆ†æè§„åˆ™è¦†ç›–ç‡
coverage = brain.knowledge_base.analyze_coverage()

# è¯†åˆ«ç¼ºå¤±çš„è§„åˆ™
gaps = coverage["missing_patterns"]

# æ‰‹åŠ¨æ·»åŠ è§„åˆ™ (ç´§æ€¥æƒ…å†µ)
brain.knowledge_base.add_rule(
    context={...},
    decision={...},
    confidence=0.5  # ä½ç½®ä¿¡åº¦ï¼Œéœ€è¦å­¦ä¹ 
)
```

### é—®é¢˜: ç³»ç»Ÿå“åº”æ—¶é—´å¢é•¿

**åŸå› **: çŸ¥è¯†åº“è¿‡å¤§æˆ–ç³»ç»Ÿè¿‡è½½
**è§£å†³**:

```python
# æ¸…ç†è¿‡æ—¶è§„åˆ™
brain.knowledge_base.cleanup(
    min_usage_count=10,
    age_threshold=30  # å¤©
)

# è§¦å‘åƒåœ¾å›æ”¶
brain.optimizer.trigger_gc()

# å¢åŠ  Worker æ•°
scale_workers(target=8)
```

---

## åã€ä¸‹ä¸€æ­¥æ‰©å±•

- [ ] é›†æˆå¼ºåŒ–å­¦ä¹ æ¨¡å‹
- [ ] æ·»åŠ å¤šç›®æ ‡å†³ç­–ä¼˜åŒ–
- [ ] å®ç°åˆ†å¸ƒå¼çŸ¥è¯†åº“
- [ ] æ”¯æŒç”¨æˆ·è‡ªå®šä¹‰è§„åˆ™
- [ ] å®æ—¶å†³ç­–å¯è§†åŒ–ä»ªè¡¨æ¿

---

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0 | **æœ€åæ›´æ–°**: 2026-01-09
